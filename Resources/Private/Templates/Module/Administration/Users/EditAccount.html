{namespace neos=TYPO3\Neos\ViewHelpers}
<f:layout name="BackendSubModule" />

<f:section name="subtitle">
	<div class="neos-module-container">
		<h2>{neos:backend.translate(source: 'Modules', id: 'users.editAccount.title', arguments: {accountIdentifier: account.accountIdentifier})}</h2>
	</div>
</f:section>
<f:section name="content">
	<f:form action="updateAccount" object="{account}" objectName="account" class="user user-edit">
		<div class="neos-row-fluid neos-module-container">
			<fieldset class="neos-span5">
				<legend>{neos:backend.translate(source: 'Modules', id: 'users.account')}</legend>
				<div class="neos-control-group">
					<label class="neos-control-label">{neos:backend.translate(source: 'Modules', id: 'users.username')}</label>
					<div class="neos-controls">
						<span class="neos-span12 neos-uneditable-input" title="{neos:backend.translate(source: 'Modules', id: 'users.usernameCannotBeChanged')}">{account.accountIdentifier}</span>
					</div>
				</div>

				<div class="neos-control-group">
					<label class="neos-control-label" for="password[0]">{neos:backend.translate(id: 'password')}</label>
					<div class="neos-controls">
						<f:form.password name="password[0]" id="password[0]" class="neos-span12" />
					</div>
				</div>

				<div class="neos-control-group">
					<label class="neos-control-label" for="password[1]">{neos:backend.translate(source: 'Modules', id: 'users.repeatPassword')}</label>
					<div class="neos-controls">
						<f:form.password name="password[1]" id="password[1]" class="neos-span12" />
					</div>
				</div>

				<div class="neos-control-group">
					<label class="neos-control-label">{neos:backend.translate(source: 'Modules', id: 'users.roles')}</label>
					<f:for each="{availableRoles}" as="role" iteration="rolesIteration">
						<div class="neos-controls">
							<label for="roles-{rolesIteration.cycle}" class="neos-checkbox">
								<f:form.checkbox name="roleIdentifiers" multiple="true" value="{role.identifier}" id="roles-{rolesIteration.cycle}" checked="{f:security.ifHasRole(role: role, account: account, then: true, else: false)}"/><span></span>
								{role.name} <span class="neos-help-inline">({role.packageKey})</span>
							</label>
						</div>
					</f:for>
				</div>
			</fieldset>
		</div>

		<div class="neos-footer">
			<f:link.action action="edit" arguments="{user: user}" class="neos-button">{neos:backend.translate(id: 'cancel', value: 'Cancel')}</f:link.action>
			<f:form.submit value="{neos:backend.translate(source: 'Modules', id: 'users.saveAccount')}" class="neos-button neos-button-primary" />
		</div>
	</f:form>
	<f:form action="index" id="postHelper" method="post"></f:form>
</f:section>